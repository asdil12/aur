# Maintainer: Dominik Heidler <dheidler@gmail.com>

pkgname=gqrx
pkgver=2.1.331
pkgrel=1
_commit=3d26e6355a4387403f8e17e79b7d80297134e99f
pkgdesc="SDR receiver for Funcube Dongle, RTL-SDR, USRP and OsmoSDR devices"
arch=('i686' 'x86_64')
url="http://www.oz9aec.net/index.php/gnu-radio/gqrx-sdr"
license=('GPL')
depends=('qt4>=4.6' 'boost-libs' 'fftw' 'libusb' 'gsl' 'alsa-lib' 'libpulse' 'libuhd' 'pulseaudio' 'gnuradio' 'gr-osmosdr')
makedepends=('boost')
install='gqrx.install'
source=("$pkgname-$pkgver.tar.gz::https://codeload.github.com/csete/gqrx/tar.gz/$_commit" "21-fcd.rules" "${pkgname}.png" "${pkgname}.desktop")

build() {
	#cd "$srcdir/$pkgname-$pkgver"
	cd "$srcdir/$pkgname-$_commit"
	qmake-qt4
	make
}

package() {
	install -m755 -d $pkgdir/etc/udev/rules.d
	install -m755 -d $pkgdir/usr/{bin,share/applications,share/pixmaps}

	cd $srcdir
	
	install -D -m644 21-fcd.rules $pkgdir/etc/udev/rules.d
	install -D -m644 $pkgname.desktop $pkgdir/usr/share/applications
	install -D -m644 $pkgname.png $pkgdir/usr/share/pixmaps

	#cd "$pkgname-$pkgver"
	cd "$srcdir/$pkgname-$_commit"

	install -D -m755 $pkgname $pkgdir/usr/bin
}

md5sums=('c85b696c69a15f8fc16f576515f61972'
         '2be3bf7cba02e90cbbb9d5f6cfdaf68b'
         'f7032a8883c89bd80e0d0fd36f861c59'
         '810f89195231c18f32af92522aade721')
